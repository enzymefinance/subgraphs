type GeneralInfo @entity {
  id: ID!
  depositorsCounterActive: Int! # takes into account only active stakers
  depositorsCounterOverall: Int! # takes into account also those who unstaked
  vaultsGav: BigDecimal! #GAV of stETH + ETH vaults
  updatedAt: Int!
}

type ActivityCounter @entity {
  id: ID!
  count: Int!
}

type Comptroller @entity {
  id: ID!
  vault: Bytes!
}

type Depositor @entity {
  id: Bytes!
  updatedAt: Int!
  createdAt: Int!
  amount: BigDecimal!
  shares: BigDecimal!
  activities: [Activity!]! @derivedFrom(field: "depositor")
  deposits: [Deposit!]! @derivedFrom(field: "depositor")
  redemptions: [Redemption!]! @derivedFrom(field: "depositor")
}

interface Activity {
  id: ID!
  createdAt: Int!
  vault: Bytes!
  depositor: Depositor!
  gavBeforeActivity: BigDecimal!
  activityCounter: Int!
}

type Deposit implements Activity @entity {
  id: ID!
  createdAt: Int!
  updatedAt: Int!
  vault: Bytes!
  depositor: Depositor!
  gavBeforeActivity: BigDecimal!
  activityCounter: Int!
  initialTrancheAmounts: [BigDecimal!]! #stored for historical purposes
  trancheAmounts: [BigDecimal!]!
}

type Redemption implements Activity @entity {
  id: ID!
  createdAt: Int!
  vault: Bytes!
  depositor: Depositor!
  gavBeforeActivity: BigDecimal!
  activityCounter: Int!
  amounts: [BigDecimal!]!
  trancheIds: [Int!]!
  firstClaimAmount: BigDecimal!
  secondClaimAmount: BigDecimal!
}
